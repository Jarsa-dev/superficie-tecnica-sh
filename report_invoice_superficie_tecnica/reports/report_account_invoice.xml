<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="report_account_invoice_superficie_tecnica" inherit_id="account.report_invoice_document">
        <xpath expr="//td[hasclass('o_price_total')][1]" position="replace">
            <t t-if="line.discount and line.discount == 100">
                <td class="text-right o_price_total">
                    <span class="text-nowrap" t-esc="line.quantity * line.price_unit" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                </td>
            </t>
            <t t-else="">
                <td class="text-right o_price_total">
                    <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                    <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                </td>
            </t>
        </xpath>
        <xpath expr="//tr[hasclass('o_subtotal')]" position="replace">
            <t t-set="full_discount" t-value="all([l.discount == 100 for l in o.invoice_line_ids])"/>
            <t t-if="full_discount">
                <tr class="border-black o_subtotal" style="">
                    <td><strong>Subtotal</strong></td>
                    <td class="text-right">
                        <span t-esc="sum([l.quantity * l.price_unit for l in o.invoice_line_ids])" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                    </td>
                </tr>
            </t>
            <t t-else="">
                <tr class="border-black o_subtotal" style="">
                    <td><strong>Subtotal</strong></td>
                    <td class="text-right">
                        <span t-field="o.amount_untaxed"/>
                    </td>
                </tr>
            </t>
        </xpath>
        <xpath expr="//th[@name='th_price_unit']" position="replace">
            <th t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span>Materia prima</span>
            </th>
        </xpath>
        <xpath expr="//th[@name='th_taxes']" position="replace">
            <th t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span>Valor agregado</span>
            </th>
        </xpath>
        <xpath expr="//td[5]" position="replace">
            <td class="text-right">
                <span t-field="line.raw_material" t-options="{'widget': 'text'}" style="text-align:right;"/>
            </td>
        </xpath>
        <xpath expr="//td[7]" position="replace">
            <td class="text-right">
                <spab t-field="line.value_added" t-options="{'widget': 'text'}" style="text-align:right;"/>
            </td>
        </xpath>
        <xpath expr="//p[@name='payment_communication']" position="before">
            <strong>Total with letter: </strong><span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
            <br/>
        </xpath>
    </template>
</odoo>
